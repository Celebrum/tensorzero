<!DOCTYPE html>
<html>
<head>
    <title>TensorZero Quantum Network Visualization</title>
    <style>
        #quantum-network {
            width: 100%;
            height: 100vh;
            background: #1a1a1a;
        }
        .node {
            fill: #4CAF50;
            transition: fill 0.3s;
        }
        .node.entangled {
            fill: #2196F3;
        }
        .link {
            stroke: #9E9E9E;
            stroke-width: 2px;
        }
        .link.active {
            stroke: #03A9F4;
            stroke-width: 3px;
        }
    </style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div id="quantum-network"></div>
    <script>
        const { ipcRenderer } = require('electron');
        
        // Initialize force-directed graph
        const width = window.innerWidth;
        const height = window.innerHeight;
        
        const svg = d3.select("#quantum-network")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
            
        let simulation = d3.forceSimulation()
            .force("link", d3.forceLink().id(d => d.id))
            .force("charge", d3.forceManyBody())
            .force("center", d3.forceCenter(width / 2, height / 2));
            
        // Update quantum network visualization
        ipcRenderer.on('quantum-state-update', (event, stateJson) => {
            const state = JSON.parse(stateJson);
            updateNetwork(state);
        });
        
        function updateNetwork(state) {
            // Update nodes
            const nodes = svg.selectAll(".node")
                .data(state.nodes, d => d.id);
                
            nodes.enter()
                .append("circle")
                .attr("class", "node")
                .attr("r", 10)
                .merge(nodes)
                .classed("entangled", d => state.entangled_pairs.includes(d.id));
                
            nodes.exit().remove();
            
            // Update links
            const links = svg.selectAll(".link")
                .data(state.edges, d => `${d.source}-${d.target}`);
                
            links.enter()
                .append("line")
                .attr("class", "link")
                .merge(links)
                .classed("active", d => {
                    return state.entangled_pairs.some(pair => 
                        pair.includes(d.source) && pair.includes(d.target)
                    );
                });
                
            links.exit().remove();
            
            // Update force simulation
            simulation
                .nodes(state.nodes)
                .force("link").links(state.edges);
                
            simulation.alpha(1).restart();
        }
        
        // Handle window resize
        window.addEventListener('resize', () => {
            svg.attr("width", window.innerWidth)
               .attr("height", window.innerHeight);
            simulation.force("center", d3.forceCenter(
                window.innerWidth / 2, window.innerHeight / 2
            ));
        });
    </script>
</body>
</html>